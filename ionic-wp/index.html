<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Using WP to Power an Ionic App</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<section data-background="img/repme-being-used.jpg" style="background-color:rgba(0,0,0,.5);">
						<h1>WP-Powered Ionic</h1>
						<h3><a href="http://ionic.io">http://ionic.io</a></h3>
						<p>
							<small>A really useful tool to make hybrid apps</small>
						</p>
					</section>
					<section>
						<div>
							
						<ul>
							<li><a href="https://apppresser.com/">Apppresser</a> &amp; <a href="http://reactorapps.io">Reactor</a></li>
							<li><a href="https://codecavalry.com/">Code Cavalry</a></li>
							<li><a href="http://schoolpress.me/">SchoolPress</a></li>
						</ul>
					</div>
					<div class="fragment">
						<ul>
							<li>Big Bear Mountain Weather Radar</li>
							<li>Site down alarm</li>
							<li>Autopost to MailChimp, Twitter, Slackbot, etc</li>
						</ul>
							
						</div>
						<aside class="notes">
							Lots of people have been talking about hybrid apps with WP. 
							<br>* But there's still alot of untapped potential. RC Lations at WCUS talked about extending WordPress beyond the internet
							<br>- WordPress as a service
						</aside>
					</section>
				</section>
				<section>
					<section >
						<iframe class="youtube-player" id="player" type="text/html" src="http://www.youtube.com/embed/OvwXv8JSmgw?autohide=1&autoplay=0&enablejsapi=1" frameborder="0" muted="muted" width="500" height="500" style="margin-top: -10%;"></iframe>
						<h3>Represent Me</h3>
						<p>Uses actual legislation data to compare your stance on topics against our current representatives to help citizens decide who to vote for.</p>
						<p>Uses WordPress for data &amp; Ionic for the front end</p>
						<script>
								var tag = document.createElement('script');
					      tag.src = "http://www.youtube.com/player_api";
					      var firstScriptTag = document.getElementsByTagName('script')[0];
					      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
					      // 3. This function creates an <iframe> (and YouTube player)
					      //    after the API code downloads.
					      var player;
					      function onYouTubePlayerAPIReady() {
					        player = new YT.Player('player', {
					          playerVars: { 'autoplay': 0, 'controls': 1,'autohide':1 },
					          videoId: 'OvwXv8JSmgw',
					          events: {
					            'onReady': onPlayerReady}
					        });
					      }
					      // 4. The API will call this function when the video player is ready.
					      function onPlayerReady(event) {
					        event.target.mute();
					      }
						</script>
					</section>
					<section>
						<h3>Why use WordPress for the data layer?</h3>
						<p class="fragment">It's awesome. D'uh</p>
						<ul class="fragment">
							<li>Easy for anyone to update content </li>
							<li>Plugin data can be accessed through endpoints (<a href="http://wp-api.org/guides/extending.html ">wp-api.org/guides/extending.html</a>)</li>
							<li>You get a free website if you need it.</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h1>Super easy to setup</h1>
						<p>1: Install &amp; activate the <a href="https://wordpress.org/plugins/json-rest-api/">JSON REST API plugin</a></p>
						<p>Get site data at:</p>
						<p>yoursite.com/wp-json/***</p>
						<p><em>example: representmenow.co/wp-json/posts</em></p>
					</section>
					<section>
						<h1>Super easy to setup</h1>
						<p>2: Install Ionic from the command line:</p>
						<pre><code class="bash">
npm install -g cordova ionic
ionic start {appname} {template}
cd {appname}
ionic platform add ios
ionic platform add android
ionic serve
						</code></pre>
					</section>
					<section>
						<h1>Super easy to setup</h1>
						<p>3: Get Ionic talking to WordPress</p>
						<pre><code class="bash">
diff --git a/www/index.html b/www/index.html

     <script src="lib/ionic/js/ionic.bundle.js"></script>
+    <script src="lib/ionic/js/angular/angular-resource.min.js"></script>

     <!-- cordova script (this will be a 404 during development) -->


diff --git a/www/js/app.js b/www/js/app.js

 // 'starter.controllers' is found in controllers.js
-angular.module('starter', ['ionic', 'starter.controllers', 'ui.router'])
+angular.module('starter', ['ionic', 'starter.controllers', 'ui.router', 'ngResource'])
+
+.factory('resources', function($resource) {
+  var url = 'http://representmenow.co/wp-json';
+  return {
+    'posts': $resource(url + '/posts'),
+  };
+})

.run(function($ionicPlatform) {
	
	
diff --git a/www/js/controllers.js b/www/js/controllers.js

+  // Get the post data
+  resources.posts.query({
+    'type[]': 'legislation',
+    'filter[status]': 'publish',
+    'filter[order]': 'DESC',
+  },
+  function(posts) {
+    // Success callback
+    $scope.legislations = posts;
+  },
+  function(error) {
+    // Error callback
+    console.warn('An error occured:',error);
+    $scope.posts = [{
+      title: 'Error',
+      content: error.data[0].message,
+    }];
+  });


diff --git a/www/templates/legislation.html b/www/templates/legislation.html

<ion-view view-title="Legislation">
<ion-content>
- Content will go here
+ <ion-list>
+  <ion-item ng-repeat="legislation in legislations" href="#/app/legislation/{{legislation.ID}}">
+   <span ng-bind-html="legislation.title"></span>
+  </ion-item>
+ </ion-list>
</ion-content>
	
						</code></pre>
					</section>
				</section>
				<section>
					<section data-background="img/repme-being-used.jpg" style="background-color:rgba(0,0,0,.8);">
						<h1>Next steps</h1>
						<ul>
							<li>Lock down the endpoints (security)</li>
							<li>Finish Post to Post relationships</li>
							<li>Build through WP interface (menus, widgets, user data)</li>
						</ul>
						<p>The Represent Me team is looking for more help. 
							<br>It's a great project to jump on and get experience making
							<br>WP-powered apps</p>
					</section>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>